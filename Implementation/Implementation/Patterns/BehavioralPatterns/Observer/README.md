**Прям мега упрощённый пример паттерна. Более комплексный пример можно сделать при помощи Rabbit-a и библиотеки EasyNetQ,**
**но там по нормальному ещё свою реализацию шины сообщений придётся писать + реализацию репозитория ещё продумать, если мы будем что-то из сообщений кролика хранить в БД.**

**Название и классификация паттерна﻿**
 
﻿**Наблюдатель﻿** — паттерн поведения объектов.
 
﻿**Назначение﻿**
 
Определяет зависимость типа «один ко многим» между объектами таким образом, что при изменении состояния одного объекта все зависящие от него оповещаются об этом и автоматически обновляются.

﻿**Другие названия﻿**
 
Dependents (подчиненные), Publish-Subscribe (издатель — подписчик).

﻿**Применимость﻿**
 
Основные условия для применения паттерна наблюдатель:
* у абстракции есть два аспекта, один из которых зависит от другого. Инкапсуляции этих аспектов в разные объекты позволяют изменять и повторно использовать их независимо;
* при модификации одного объекта требуется изменить другие, и вы не знаете, сколько именно объектов нужно изменить;
* один объект должен оповещать других, не делая предположений об уведомляемых объектах. Другими словами, объекты не должны быть тесно связаны между собой.

﻿**Отношения﻿**
 
* объект ConcreteSubject уведомляет своих наблюдателей о любом изменении, которое могло бы привести к рассогласованности состояний наблюдателя и субъекта;
* после получения от конкретного субъекта уведомления об изменении объект ConcreteObserver может запросить у субъекта дополнительную информацию, которую использует для того, чтобы оказаться в состоянии, согласованном с состоянием субъекта.
На схеме взаимодействий показаны отношения между субъектом и двумя наблюдателями.

![image](https://github.com/user-attachments/assets/20019f43-15d5-4a8e-915b-bff3d20680c8)

﻿**Результаты﻿**
 
Паттерн наблюдатель позволяет изменять субъекты и наблюдатели независимо друг от друга. Субъекты разрешается повторно использовать без участия наблюдателей, и наоборот. Это дает возможность добавлять новых наблюдателей без модификации субъекта или других наблюдателей.

Основные достоинства и недостатки паттерна наблюдатель:
* абстрактная связанность субъекта и наблюдателя. Субъект имеет информацию лишь о том, что у него есть ряд наблюдателей, каждый из которых подчиняется простому интерфейсу абстрактного класса Observer. Субъекту неизвестны конкретные классы наблюдателей. Таким образом, связи между субъектами и наблюдателями носят абстрактный характер и сведены к минимуму.
Поскольку субъект и наблюдатель не являются тесно связанными, они могут находиться на разных уровнях абстракции системы. Субъект более низкого уровня может уведомлять наблюдателей, находящихся на верхних уровнях, не нарушая иерархии системы. Если бы субъект и наблюдатель представляли собой единое целое, то получающийся объект либо пересекал бы границы уровней (нарушая принцип их формирования), либо должен был находиться на каком-то одном уровне (нарушая абстракцию уровня);
* поддержка широковещательных коммуникаций. В отличие от обычного запроса, для уведомления, посылаемого субъектом, не нужно задавать определенного получателя. Уведомление автоматически поступает всем подписавшимся на него объектам. Субъекта не интересует, сколько существует таких объектов; от него требуется всего лишь уведомить своих наблюдателей. Таким образом, мы можем в любое время добавлять и удалять наблюдателей. Наблюдатель сам решает, обработать полученное уведомление или игнорировать его;
* неожиданные обновления. Поскольку наблюдатели не располагают информацией друг о друге, им неизвестно и о том, во что обходится изменение субъекта. Безобидная на первый взгляд операция над субъектом может вызвать целый ряд обновлений наблюдателей и зависящих от них объектов. Более того, нечетко определенные или плохо поддерживаемые критерии зависимости могут стать причиной непредвиденных обновлений, отследить которые очень сложно.
Проблема усугубляется еще и тем, что простой протокол обновления не содержит никаких сведений о том, что именно изменилось в субъекте. Без дополнительного протокола, который позволяет получить информацию об изменениях, наблюдатели будут вынуждены проделать сложную работу для косвенного получения такой информации.
